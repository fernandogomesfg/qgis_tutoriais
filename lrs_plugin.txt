**Referenciação linear no QGIS**

A referenciação linear, é uma técnica que permite representar fenómenos
geográficos (pontos ou segmentos) com recurso à medição de entidades
lineares.

Esta técnica pode ser usada, por exemplo, para referenciar eventos que
ocorrem ao longo de uma rede de estradas, tais como os marcos
quilométricos, acidentes rodoviários, ou o estado de conservação das
vias.

![](Pictures/1000000000000137000000934EF3CEE2A7F769DF.gif){width="3.6835in"
height="1.7409in"}

Na figura acima, as medidas da rede, são usadas para referenciar as
localizações de acidentes rodoviários, através de pontos.

**Na **figura **abaixo**, a rede é usada para referenciar o estado de
conversação das vias.**

![](Pictures/1000000000000149000000A05638A4D949EDE02F.gif){width="4.2736in"
height="2.1161in"}

Na Prática

NOTA: Para que tudo corra da melhor forma, primeiro é preciso verificar
se não existem erros do ponto de vista topológico ou geométrico, tais
como, a falta de ligação entre vias.

1º Passo – Criar layer de pontos que auxilie na calibração da rede

-   Adicionar o plugin **QChainage**
-   Ativar o plugin através do menu ***Vector***
-   No separador ***Basic***, deve-se escolher o layer correspondente à
    rede, bem como o intervalo de valores a criar para os pontos e um
    nome para o layer de pontos que será criado. Deve-se ativar a opção
    ***Force last point***, para permitir ter pontos que definam as
    medidas completas das linhas

![](Pictures/10000000000001850000010EB867BEB300345DB1.png){width="4.2598in"
height="2.9571in"}

-   No separador ***Advanced***, basta ativar a opção ***Start from*****
    **e deixar o valor a zero de forma a que sejam criados pontos a
    partir do inicio da linha
-   O resultado é um layer temporário, logo existe a necessidade guardar
    como layer permante. Com botão lado direito sobre o layer, escolher
    a opção ***Make Permanent ***e escolher o tipo de formato desejado

<!-- -->

-   Por fim, deve-se acrescentar à tabela de atributos dos pontos,
    informação referente ao nome (ID) das estradas a que pertence cada
    ponto

**NOTA**: Para a realização do ponto anterior, é possível utilizar
várias ferramentas e funções. Tais como, plugin NNJoin, algoritmo Join
attributes by location, função Aggregate, entre outros.

2º Passo – Utilização do plugin LRS

-   Adicionar o plugin **LRS **
-   Ativar o plugin através do menu ***Vector***
-   No separador** *****Calibration***, deve-se definir qual o layer de
    linhas que contém as vias, bem como o campo com identificação da
    via. Seguidamente deve ser preenchida a informação referente ao
    layer de pontos criado anteriormente, nomeadamente o nome do layer,
    o campo da tabela com indicação da identificação da via e o campo
    com indicação das medidas de cada ponto. Após essas configurações,
    deve-se correr o processo de calibração, para verificar se existem
    erros. Se existirem erros, eles serão mencionados no separador
    ***Errors***

![](Pictures/10000000000001D30000021F33CDE1A0FE63B5FA.png){width="4.5937in"
height="5.3417in"}

-   O separador*** ****Errors***, permite então visualizar eventuais
    erros que existam nas linhas. Alguns dos erros mais comuns, são
    linhas duplicadas, linhas que não estão conectadas a outras, etc. Se
    existirem erros, devem ser corrigidos através da edição do layer

Para mais informação acerca dos possíveis erros, consulte o manual na
respectiva seção
<http://blazek.github.io/lrs/release/help.1.1.1/index.html>

-   No separador*** Locate***, é possível testar de forma interactiva se
    está tudo funcional. Para isso, basta selecionar uma das vias na
    opção ***Route ***e introduzir uma medida métrica na opção
    ***Measure***. O plugin irá efetuar uma aproximação para a medida
    introduzida

![](Pictures/1000000000000556000002E4BDF33F3F805ACFF0.png){width="4.3457in"
height="2.9598in"}

-   No separador ***Events***, podem-se então representar dados
    tabulares, que possuam indicação de eventos que ocorrem nas vias. Na
    opção ***Events layer***, deve-se escolher a tabela com
    identificação dos eventos que se pretende utilizar. O ***Route
    field** *deve ser o campo com a identificação da via

**NOTA: **Se estivermos a representar eventos pontuais, escolhe-se
apenas a opção ***Start measure field***. Para eventos lineares, deve-se
usar as opções de ínicio e fim

![](Pictures/1000000000000554000002E4D2950A77D5221CA0.png){width="5.7953in"
height="2.5217in"}

A figura seguinte, representa a espacialização dos pontos existentes na
tabela de eventos e registados em função das medidas de cada via.

![](Pictures/1000000000000555000002E7830C464CFE91AB49.png){width="5.4583in"
height="3.0811in"}

-   O resultado será a criação de um layer temporário (virtual) com
    representação dos eventos existentes na tabela e que pode ser
    guardado no formato desejado

-   Após a criação deste layer, é possível pegar e representar os dados
    da tabela através das simbologias permitidas pelo QGIS. No exemplo
    abaixo, é feita a representação pelo campo que representa o estado
    de conservação das vias

![](Pictures/1000000000000553000002E4D276A562A1FF9046.png){width="4.9602in"
height="2.6354in"}

Links de interesse sobre LRS

Plugin: <http://blazek.github.io/lrs/release/help.1.1.1/index.html>

GRASS GIS:
[*https://grass.osgeo.org/grass76/manuals/lrs.html*](https://grass.osgeo.org/grass76/manuals/lrs.html)

POSTGIS:
<http://postgis.net/docs/manual-1.5/reference.html#Linear_Referencing>
